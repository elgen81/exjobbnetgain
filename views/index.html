<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">
    
        <title>Netgain-esb</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        <link href="style.css" rel="stylesheet">
        <script>
               
        function whitelist(){
            document.getElementById("main").innerHTML = '<object type="text/html" data="whitelist.html" width="100%" height="600" border=0 ></object>';
        }
        
        function log(){
            document.getElementById("main").innerHTML = '<object type="text/html" data="log.html" width="100%" height="600" border=0 ></object>';
        }
         
        function errorLog(){
            document.getElementById("main").innerHTML = '<object type="text/html" data="errorLog.html" width="100%" height="600" border=0 ></object>';
        }
    
        function getData(){
            var data={};
            data.statusS = "n/a";
            data.statusP = "n/a";
            data.statusQ = "n/a";

            $.ajax({
                url : 'http://localhost:8000/menu/servDbStatus',
                        type : 'GET',
                        data : data,
                        success : function(data,textStatus, jqXHR){
                            switch(data.statusS){
                                case "1":
                                    document.getElementById("statusS").innerText = "Connected";
                                    document.getElementById("statusS").style.color = "green";
                                    break;
                                case "2":
                                    document.getElementById("statusS").innerText = "Connecting";
                                    document.getElementById("statusS").style.color = "yellow";
                                    break;
                                case "3":
                                    document.getElementById("statusS").innerText = "Disconnecting";
                                    document.getElementById("statusS").style.color = "yellow";
                                    break;
                                default:
                                    document.getElementById("statusS").innerText = "Error";
                                    document.getElementById("statusS").style.color = "red";
                                    break;    
                            }
                            document.getElementById("statusQ").innerText = data.statusQ;
                            document.getElementById("statusQ").style.color = "green"
                            document.getElementById("statusP").innerText = data.statusP;
                            document.getElementById("statusP").style.color = "green"                                
                        },
                        error : function(jqXHR,textStatus, errorThrown){
                            document.getElementById("statusS").innerText = data.statusS;
                            document.getElementById("statusS").style.color = "red"
                            document.getElementById("statusQ").innerText = data.statusQ;
                            document.getElementById("statusQ").style.color = "red"
                            document.getElementById("statusP").innerText = data.statusP;
                            document.getElementById("statusP").style.color = "red"
                        } 
            })    
        }            
    </script> 
    <script>window.onload=getData;</script>
    <script>setInterval(getData(),60000); </script>
    </head>
    <body>
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <img src="netgain.png" height="27px"></img>
                    <div class="btn-group btn-group-lg" role="group">
                        <button type="button" class="btn btn-basic btn-lg" onclick="whitelist()">Whitelist</button>
                        <button type="button" class="btn btn-basic btn-lg" onclick="log()">Log</button>
                        <button type="button" class="btn btn-basic btn-lg" onclick="errorLog()">Errorlog</button>
                        <button type="button" class="btn btn-basic btn-lg">Statistics</button> 
                    </div>
                </div>
            </div>
        </nav>
        <main role="main" class="container" id="main">
            <H1 class="mt-5">Welcome to the Netgain-esb</H1>
            <p class="lead">This is an adminpage for the Netgain-esb</p>
            <p>We hope this will help you!</p>
        </main>

        <footer class="footer">
            <div class="container">
                <p class="text-muted">        
                | Server status: <span id="statusS"></span>
                | Active queues: <span id="statusQ"></span>
                | Packets in queues: <span id="statusP"></span>
                | <button class="glyphicon glyphicon-refresh" onclick="getData()"></button>
                </p>
            </div>
        </footer>
    </body>
</html>

